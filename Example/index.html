<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Validation Examples</title>
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="..\jquery.microval.js"></script>
    <script type="text/javascript" src="..\plugins\mv.inputhint.js"></script>
    <script type="text/javascript" src="..\plugins\mv.inputsuccess.js"></script>
    <script type="text/javascript" src="..\plugins\mv.inputmask.js"></script>
    <style type="text/css">
        .mv-element-error {
            color: red;
            font-weight: bold;
        }
        .mv-input-error {
            border: 1px solid red;
            background-color: #ffcccc;
        }
        .mv-element-success {
            color: #00CC66;
        }
        .mv-input-success {
            background-color: #00FF99;
        }
        .mvHint {
            color: gray !important;
        }
    </style>
    <script type="text/javascript">
        $(function() {
            var datePick = $('#date'),
                username = $('#username'),
                password = $('#password'),
                firstname = $('#FirstName'),
                val = $('#signupForm').microval({
                    appendRulesToFieldClass: true,
                    parseMarkup: true,
                    rules: {
                        dateformat: {
                            message: 'Invalid Date',
                            validate: function(o) {
                                return (/^\d{1,2}\/\d{1,2}\/\d{2,4}$/i.test(this.val()));
                            }
                        },
                        mylength: {
                            inherit: 'length',
                            min: 10, max: 20,
                            message: 'Between 10 and 20 characters.'
                        }
                    },
                    plugins: {
                        inputmask: {
                            emptyMaskClass: 'mvHint'
                        },
                        inputhint: {}
                    },
                    fields: [
                        {
                            field: password,
                            successMessage: 'Test',
                            hintText: 'Password',
                            rules: {
                                required:{},
                                length: {
                                    min: 5,
                                    max: 10,
                                    message: 'Between 5-10 character.'
                                }
                            }
                        },
                        {
                            field: firstname,
                            rules: {
                                required:{
                                    message: 'Required Name!',
                                    container: $('#firstNameError')
                                },
                                mylength: {
                                    max: 100
                                }
                            }
                        },
                        {
                            field: username,
                            // chain: [password, datePick],
                            rules: {
                                required: {},
                                mylength: {
                                    message: 'Must be between 10 and 20 characters.'
                                }
                            }
                        },
                        {
                            field: datePick,
                            mask: 'date',
                            rules: {
                                required: {},
                                dateformat: {}
                            }
                        }
                    ],
                    onFieldAdded: function() {
                        this.parents('div:eq(1)').find('label:first').prepend('*').addClass('ValidationLabel');
                    },
                    focusFirstInvalidField: true,
                    reconcileFieldOrder: true
                });
            datePick.datepicker({
                showOn: "button",
                buttonImage: "calendar.gif",
			    buttonImageOnly: true
            });
            setTimeout(function() {
                var test = $('#test');
                test.html('<label for="dynamicField">Dynamic Field</label><div><!-- { "field": "#dynamicField", "rules": { "required":{}} } --><input id="dynamicField" name="dynamicField" type="text" /></div>');
                val.AddMarkupRules();
            }, 3000);
        });
    </script>
</head>
<body>
    <form class="cmxform" id="signupForm" method="get" action="">
        <div>
            <label for="username">Username</label>
            <div>
                <input id="username" name="username" type="text">
            </div>
        </div>
        <div>
            <div id="passwordContainer">

            </div>
            <label for="password">Password</label>
            <div>
                <input id="password" name="password" type="password" hint="Password"/>
            </div>
        </div>
        <div>
            <label for="date">Date</label>
            <div>
                <input id="date" name="date" type="text" />
            </div>
        </div>
        <div>
            <label for="confirm_password">Confirm password</label>
            <div>
                <!-- { "field": "#confirm_password", "rules": { "required" : {} } } -->
                <!-- { "field": "#confirm_password", "rules": { "length": { "min": 2, "max": 10, "message": "Cannot be longer than 10 characters." } } } -->
                <input id="confirm_password" name="confirm_password" type="password" />
            </div>
        </div>
        <div>
            <label for="FirstName">First Name (Uses container for error!)</label>
            <div id="firstNameError"></div>
            <div>
                <input id="FirstName" name="FirstName" type="text" />
            </div>
        </div>
        <div id="test">
            In 3 seconds, this will be replaced with a field and some HTML rules.
        </div>
        <input class="submit" type="submit" value="Cancel"/>
        <input class="submit" type="submit" value="Submit"/>
    </form>
</body>
</html>