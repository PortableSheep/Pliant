/*! v1.1 */(function(a){a.pliantPlugins.inputmask=function(b,c){var d=a.extend(!0,{masks:{date:{rule:"9{2}/9{2}/9{4}",placeholder:"_",maskOnFocus:!0},url:{rule:"http://*{512}",placeholder:"",maskOnFocus:!1},phone:{rule:"(9{3}) 9{3}-9{4}",placeholder:"_",maskOnFocus:!1},phoneWithExt:{rule:"(9{3}) 9{3}-9{4}? x9{5}",placeholder:"_",maskOnFocus:!1}},definitions:{9:"[0-9]",a:"[A-Za-z]",A:"[A-Za-z0-9]","*":"[A-Za-z0-9_/-]"},resetIncompleteMasks:!0,emptyMaskClass:"plinputmask"},b),e=[],f=function(a){var b=null;if(a.setSelectionRange)b={start:a.selectionStart,end:a.selectionEnd};else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();b={start:0-c.duplicate().moveStart("character",-1e5),end:c.text.length}}return b.count=b.start==b.end?1:b.end-b.start,b},g=function(a,b,c){if(typeof b=="number"){c=c||b;if(a.setSelectionRange)a.setSelectionRange(b,c),a.focus();else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}}},h=function(a){var b={rule:[],mask:[],string:"",placeholder:a.placeholder,maskOnFocus:a.maskOnFocus,optionalIndex:-1,lastAction:null,onMaskComplete:a.onMaskComplete,onMaskChange:a.onMaskChange},c=a.rule.split("");for(var e=0;e<c.length;e++)if(c[e]==="{"){var f=a.rule.indexOf("}",e);if(f>-1){var g=parseInt(a.rule.substring(e+1,f)||1,10);for(var h=0;h<g-1;h++)b.rule.push(new RegExp(b.rule[b.rule.length-1])),b.mask.push(a.placeholder);e=f}}else c[e]=="?"?b.optionalIndex=e-1:d.definitions[c[e]]?(b.rule.push(new RegExp(d.definitions[c[e]])),b.mask.push(a.placeholder)):(b.rule.push(null),b.mask.push(c[e]));return b.string=b.mask.join(""),b},i=function(a,b,c){return a.rule[c]?a.rule[c].test(b):!1},j=function(a,b){if(a.optionalIndex>-1){b=b.split("");var c=a.optionalIndex,d=!1;while(++c<b.length)b[c]&&b[c]===a.placeholder&&b.splice(c--,1),d=a.rule[c]===null;d&&b.splice(a.optionalIndex),a.field.val(b.join(""))}},k=function(a){var b=a.field.val(),c=a.string.split("");if(!b)a.field.addClass(d.emptyMaskClass);else if(!a.placeholder){var e=-1;while(e++<b.length&&b.charAt(e)===c[e]);b=b.substring(e)}p(a,c,b,{start:0,end:0},!1)},l=function(a,b){for(var c=b;c>=0;c--)if(a.rule[c])return c;return-1},m=function(a,b,c){for(var d=c;d<=b.length;d++)if(a.rule[d])return d;return-1},n=function(a,b,c){for(var d=c,e=c,f=a.placeholder||"";d<a.mask.length&&e>-1;d++)if(a.rule[d]){e=m(a,b,d+1);var g=b[d];b[d]=f;if(g!==undefined&&!i(a,g,e))break;f=g}},o=function(a,b,c,d){for(var e=c,f=m(a,b,d);e<a.mask.length&&f>-1;e++)if(a.rule[e]){if(!i(a,b[f],e))break;b[e]=b[f],b[f]=a.placeholder,f=m(a,b,f+1)}},p=function(a,b,c,d,e){var g=d||f(a.field[0]),h=c.split("");if(g.start<a.rule.length){g.start!==g.end&&(q(a,b,g.start,g.end),g.count>1&&o(a,b,g.start+1,g.end));for(var j=0,k=m(a,b,g.start);j<h.length&&k>-1;j++)i(a,h[j],k)&&(n(a,b,k),b[k]=h[j],k=m(a,b,k+1));r(a,b,e?k>-1?k:g.start+1:null)}},q=function(a,b,c,d){for(var e=c;e<d&&e<b.length;e++)a.rule[e]&&(b[e]=a.placeholder)},r=function(a,b,c,d){a.field.val(b.join("")),c!==null&&(g(a.field[0],c,d),a.onMaskChange&&a.onMaskChange.call(a.field),a.onMaskComplete&&c>=b.length&&a.onMaskComplete.call(a.field))};c.Subscribe("onFieldAdded",function(b){var c=b.mask||b.field.attr("mask");if(c&&b.field.attr("type")!=="password"&&d.masks[c]){var i=h(d.masks[c]);i.field=b.field,b.field.on("keypress.mvinputmask",function(b){if(!b.ctrlKey&&!b.altKey&&!b.metaKey&&b.which>=32)return p(i,a(this).val().split(""),String.fromCharCode(b.which),null,!0),!1;b.which===13&&a(this).blur()}).on("keydown.mvinputmask",function(b){var c=f(this),d=a(this).val().split("");if(b.which==8&&c.start===c.end&&c.start-1>=0)return c.start=l(i,c.start-1),c.start>-1&&(q(i,d,c.start,c.end),o(i,d,c.start,c.end),r(i,d,c.start)),!1;if(b.which==46&&c.start<=i.mask.length-1||b.which==8&&c.start!==c.end)return c.start=m(i,d,c.start),c.start>c.end&&(c.end+=c.start-c.end+1),c.end=c.start===c.end?c.end+1:c.end,q(i,d,c.start,c.end),o(i,d,c.start,c.end),r(i,d,c.start),!1}).on("paste.mvinputmask",function(b){var c=a(this),d=c.val().split(""),e=f(this);if(!(e.start<i.mask.length))return!1;c.val(""),setTimeout(function(){p(i,d,c.val(),e,!0),i.lastAction="p"},0)}).on("cut.mvinputmask",function(a){return!1}).on("focus.mvinputmask",function(){k(i);var b=a(this).removeClass(d.emptyMaskClass),c=i.prevVal=b.val(),e=i.placeholder?m(i,c.split(""),0):c.length;e>-1&&setTimeout(function(){g(b[0],e)},0)}).on("blur.mvinputmask",function(){var b=a(this),c=b.val(),e=c?c.indexOf(i.placeholder):-1;c&&(i.maskOnFocus&&(c===i.string||i.placeholder&&e>-1)?b.val(""):i.placeholder&&d.resetIncompleteMasks&&e>-1&&(i.optionalIndex==-1||e<i.optionalIndex)&&b.val(i.string)),c=b.val(),i.optionalIndex>-1&&e>i.optionalIndex&&j(i,c);if(!i.lastAction||i.lastAction!=="p")i.lastAction=null,(i.maskOnFocus&&(c&&c!==i.prevVal||!c&&i.prevVal!==i.string)||!i.maskOnFocus&&(c!==i.prevVal||c!==i.string))&&b.removeClass(d.emptyMaskClass).trigger("change");c===i.string&&b.addClass(d.emptyMaskClass)});var n=b.field.val().trim();if(!i.maskOnFocus||n.length>0)k(i),n.length>0&&(n===i.string&&b.field.addClass(d.emptyMaskClass),i.optionalIndex>-1&&n!==i.string&&j(i,b.field.val()));e.push(i)}}).Subscribe("onPreFieldValidate",function(a){for(var b=0;b<e.length;b++)e[b].mask&&e[b].field[0]===a.field[0]&&(a.field.val()===e[b].string?a.field.val("").removeClass(d.emptyMaskClass):e[b].optionalIndex>-1&&j(e[b],a.field.val()))}).Subscribe("onPostFieldValidate",function(a){for(var b=0;b<e.length;b++)e[b].mask&&e[b].field[0]===a.field[0]&&a.field.val().length===0&&!e[b].maskOnFocus&&a.field.val(e[b].string).addClass(d.emptyMaskClass)}),c.ClearMasks=function(){for(var a=0;a<e.length;a++)e[a].field.val().trim()===e[a].string&&e[a].field.val("")}}})(jQuery);