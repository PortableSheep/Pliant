(function(e){e.pliantPlugins.decorator=function(r,t){var o=e.extend({},r),s=function(e){for(var r in e.rules)e.rules[r].decorate&&e.rules[r].decorate.sync&&e.rules[r].decorate.content.hide()},n=function(e){for(var r in e.rules)e.rules[r].decorate&&e.rules[r].decorate.sync&&e.rules[r].decorate.content.show()};t.Subscribe("onFieldAdded",function(r){if(r.decorate!==!1)for(var t in r.rules)if(r.rules[t].decorate!==!1&&o.hasOwnProperty(t)){r.rules[t].decorate=e.extend({},o[t]),r.rules[t].decorate.content instanceof jQuery||(r.rules[t].decorate.content=e(r.rules[t].decorate.content));var c=e.isFunction(r.rules[t].decorate.what)?r.rules[t].decorate.what.call(this):r.rules[t].decorate.what;switch(r.rules[t].decorate.how.toLowerCase()){case"prepend":c.prepend(r.rules[t].decorate.content);break;case"append":c.append(r.rules[t].decorate.content);break;case"before":c.before(r.rules[t].decorate.content);break;case"after":c.after(r.rules[t].decorate.content);break;default:}!r.rules[t].decorate.sync||r.field._origHide||r.field._origShow||(r.field._origHide=r.field.hide,r.field._origShow=r.field.show,r.field.hide=function(){this._origHide.call(this),s(r)},r.field.show=function(){this._origShow.call(this),n(r)}),r.field.is(":visible")||r.rules[t].decorate.content.hide()}}).Subscribe("onFieldRemoved",function(){for(var e in this.rules)this.rules[e].decorate&&this.rules[e].decorate.content.remove()}).Subscribe("onFieldToggle",function(e){for(var r in this.rules)this.rules[r].decorate&&this.rules[r].decorate.sync&&this.rules[r].decorate.content.toggle(e)}).Subscribe("onFieldRuleToggle",function(e,r){for(var t in this.rules)r==t&&this.rules[t].decorate&&this.rules[t].decorate.sync&&this.rules[t].decorate.content.toggle(e)})}})(jQuery);