/*!
 * Pliant jQuery plugin v3.4.2 - http://portablesheep.github.com/Pliant/
 * Copyright 2011-2012, Michael Gunderson - Dual licensed under the MIT or GPL Version 2 licenses. Same as jQuery.
 */(function(a){a.expr[":"].plVisible||(a.expr[":"].plVisible=function(b){return a(b).css("display")!="none"}),a.pliantPlugins||(a.pliantPlugins={}),a.fn.pliant=function(b){var c=this.options=a.extend(!0,{rules:{required:{validate:function(){return this.is("[type=checkbox],[type=radio]")?this.is(":checked"):a.trim(this.val()).length>0},message:"Required"},length:{min:0,max:256,message:"Invalid length",validate:function(a){var b=this.val().length,c=!0;return c&=a.max?b<=a.max:!0,c&=a.min?b>=a.min:!0,c}},numeric:{validate:function(){return/^\d+$/i.test(this.val())},message:"Numeric only"}},fields:[],appendRulesToFieldClass:!1,reconcileFieldOrder:!1,haltOnFirstInvalidRule:!0,hideMessageContainerOnLoad:!0,validateOnFieldChange:!0,focusFirstInvalidField:!1,parseMarkup:!1,ignoreHidden:!0,ignoreDisabled:!0,validateSubmit:!0,validateSubmitSelector:null,validateSubmitOn:"click",validateSubmitScope:null,inputSelector:":input[type!=button]",messageElement:"<label />",messageWrap:null,messageContainer:null,messageElementClass:"pl-element-error",messageWrapClass:"pl-wrap-error",inputClass:"pl-input-error"},b),d=a(this),e=this,f=0,g=this.fields=[],h={},i={},j=function(a,b,c){if(i[a])if(i[a]instanceof Array)for(var d in i[a])i[a][d].apply(b,c||[]);else i[a].apply(b,c||[])},k=function(a){a&&a._origMsg&&a.message[0].innerHTML!==a._origMsg&&a.message.html(a._origMsg)},l=function(){f=0;var a="."+c.messageElementClass;for(var b in g){var d=g[b];if(d.isEnabled){var e=!0;for(var h in d.rules){var i=d.rules[h];if(i.isEnabled===!1||c.haltOnFirstInvalidRule&&!Boolean(e)){i.message.hide();continue}e&=i.isValid!==!1,i.message.toggle(i.isValid===!1)}(d.isValid=Boolean(e))===!1?(f++,d.field.is(":input")&&d.field.addClass(c.inputClass)):d.field.is(":input")&&d.field.removeClass(c.inputClass),d.container&&d.container.toggle(d.container.find(a).filter(":plVisible").length>0)}}c.messageContainer&&c.messageContainer.toggle(c.messageContainer.find(a).filter(":plVisible").length>0)},m=function(a,b){if(b)for(var c in b)!a.hasOwnProperty(c)&&c!="inherit"&&(a[c]=b[c])},n=function(b,d,e){for(var f in e)this[f]=e[f];var g=c.rules[d],h=g&&g.inherit&&c.rules[g.inherit]?c.rules[g.inherit]:null;if((this.message===undefined||!(this.validate===undefined||this.validate instanceof Function))&&!g)throw"Rule `"+d+"` is invalid.";if(g||this.hasOwnProperty("message"))m(this,g),m(this,h),this._origMsg=this.message,this.message=a(c.messageElement).addClass(c.messageElementClass).append(this.message),c.messageWrap&&(this.message=a(c.messageWrap).addClass(c.messageWrapClass).append(this.message)),this.message.hide(),c.onMessagePlacement?j("onMessagePlacement",b.field,[this.message]):this.container?a(this.container).append(this.message):b.container?a(b.container).append(this.message):c.messageContainer?c.messageContainer.append(this.message):b.field.after(this.message),c.appendRulesToFieldClass&&b.field.addClass(d)},o=function(a){var b=this;this.isValid=!0,this.isEnabled=!0,this.isValidPrev=!0;for(var d in a)d!=="rules"&&(this[d]=a[d]);(a.validateOnChange||c.validateOnFieldChange&&a.validateOnChange!==!1)&&this.field.on("change.pliant",function(){b.Validate(null,!0,!1,!0)}),this.container&&this.container.hide();var e={};for(var d in a.rules)e[d]=new n(this,d,a.rules[d]);this.rules=e,j("onFieldAdded",this.field,[this])},p=function(a){if(a instanceof Array)for(var b in a)p(a[b]);else if(a.field!==undefined&&a.field.attr("id"))if(c.reconcileFieldOrder){var e=d.find(c.inputSelector).index(a.field);g.splice(e>-1?e:g.length,0,new o(a))}else g.push(new o(a))},q=function(b){b=b instanceof o||b.field!==undefined?b:{field:b},b.field instanceof String&&(b.field=a(b.field));for(var c in g)if(g[c].field.get(0)==b.field.get(0)||g[c].field.attr("id")&&g[c].field.attr("id")==b.field.attr("id"))return c;return-1},r=this.RemoveField=function(a){var b=q(a);if(b>-1){for(var d in g[b].rules)g[b].rules[d].message.remove(),c.appendRulesToFieldClass&&g[b].field.removeClass(d);g.splice(b,1)}},s=this.SetFieldEnabled=function(a,b){var c=q(a);c>-1&&(g[c].isEnabled=b)},t=this.SetFieldRuleEnabled=function(a,b,d){var e=q(a);if(e>-1)for(var f in g[e].rules)if(f==b){g[e].rules[f].isEnabled=d,c.appendRulesToFieldClass&&g[e].field.toggleClass(f,d);break}},u=this.ValidateRule=function(a,b){return c.rules[a]?c.rules[a].validate(b):!1},v=this.ResetState=function(a){if(a===undefined)for(var b in g){g[b].isValid=!0;for(var c in g[b].rules)g[b].rules[c].isValid=!0}else{var d=q(a);if(d>-1){g[d].isValid=!0;for(var e in g[d].rules)g[d].rules[e].isValid=!0}}l()},w=this.SetState=function(a){if(a instanceof Array)for(var b in a)w(a[b]);else{var c=q(a.field);if(c>-1){for(var d in a.rules)g[c].rules[d]&&(g[c].rules[d].isValid=a.rules[d]);l()}}},x=function(a){var b=[];if(a.nodeType===8&&/^\s*{.*}\s*$/.test(a.nodeValue))b.splice(0,0,a.nodeValue);else if(a.childNodes.length>0)for(var c=0;c<a.childNodes.length;c++)b=b.concat(x(a.childNodes[c]));return b},y=this.AddMarkupRules=function(b){var c=b||d,f=a(this),g=x(c[0]),h=null;for(var i in g){var j=a.parseJSON(g[i]);j&&j instanceof Object&&j.hasOwnProperty("field")&&j.hasOwnProperty("rules")&&(j.field=a(j.field),e.AddField(j))}},z=this.ValidateField=function(a){if(!(a instanceof Array)){var c=-1,d=null;a instanceof Object&&!(a instanceof String)&&!(a instanceof jQuery)&&a.field&&a.rules&&a.rules instanceof Array?(c=q(a.field),d=a.rules):c=q(a);if(c==-1)throw"Field `"+fObj.selector+"` cannot be found.";return g[c].Validate(null,!0,!0,!1,d)}for(var b in a)z(a[b])};n.prototype.SetMessage=function(a){a.length>0&&this.message.html(a)},o.prototype.Validate=function(b,d,f,g,h){this.isValidPrev=this.isValid,this.isValid=!0;if(this.isEnabled&&!(this.field.is(":disabled")&&c.ignoreDisabled||this.field.is(":hidden")&&c.ignoreHidden)&&!(g&&this.validateOnChange instanceof Function&&this.validateOnChange.call(e,this)===!1)){j("onPreFieldValidate",e,[this]);for(var i in this.rules){if(h&&h.length>0&&h.indexOf(i)===-1)continue;var m=this.rules[i];if(m.isEnabled!==!1){if(m.validateOnChange!==undefined&&m.validateOnChange!==!0&&g)if(m.validateOnChange instanceof Function&&m.validateOnChange.call(e,this)===!1||m.validateOnChange===!1){m.isValid=!0;continue}if(c.haltOnFirstInvalidRule&&!this.isValid)break;k(m);var n=b?a.merge([m],b):[m],o=m.validate?m.validate.apply(this.field,n):!0;this.isValid&=m.isValid=m.expectedResult?o===m.expectedResult:Boolean(o)}}d&&l(),j("onPostFieldValidate",e,[this,this.isValid]),c.validateOnFieldChange&&j("onFieldValidate",e,[this,this.isValid]),this.chain&&!f&&g&&z(this.chain)}return this.isValid},this.Subscribe=function(a,b){return i[a]?i[a].push(b):i[a]=[b],this},this.AddField=function(a){if(a){if(a instanceof Array)for(var b in a)this.AddField(a[b]);else{var b=q(a);if(b>-1&&a.rules!==undefined)for(var c in a.rules)g[b].rules[c]?(g[b].rules[c].message.remove(),g[b].rules[c]=new n(g[b],c,a.rules[c])):g[b].rules[c]=new n(a,c,a.rules[c]);else b==-1&&p(a)}l()}},this.GetInvalidCount=function(){return f},this.TotalFields=function(){return g.length},this.ClearFields=function(){for(var a in g)for(var b in g[a].rules)g[a].rules[b].message.remove(),c.appendRulesToFieldClass&&g[a].field.removeClass(b);g=[],f=0,l()},this.Validate=function(){var a=!0,b=!1;for(var d in g)a&=g[d].Validate(arguments,!1,!1,!1),c.focusFirstInvalidField&&!a&&!b&&(j("onInvalidFieldFocus",g[d].field),g[d].field.focus(),b=!0);return l(),a=Boolean(a),j("onFormValidate",this,[g,a]),a};if(c.validateSubmit){var A=function(a){e.Validate()||a.preventDefault()};c.validateSubmitSelector?(c.validateSubmitScope||d).on(c.validateSubmitOn||"click",c.validateSubmitSelector instanceof jQuery?c.validateSubmitSelector.selector:c.validateSubmitSelector,A):d.is("form")&&d.submit(A)}for(var B in c.rules)if((c.rules[B].message===undefined||c.rules[B].validate!==undefined&&!(c.rules[B].validate instanceof Function))&&c.rules[B].inherit===undefined)throw"Rule `"+B+"` is invalid.";c.hideMessageContainerOnLoad&&c.messageContainer&&c.messageContainer.hide();for(var C in c)C.slice(0,2)=="on"&&(c[C]instanceof Function||c[C]instanceof Array)&&this.Subscribe(C,c[C]);if(a.pliantPlugins&&c.plugins)for(var D in c.plugins)a.pliantPlugins.hasOwnProperty(D)&&(h[D]=new a.pliantPlugins[D](c.plugins[D],this));return this.AddField(c.fields),l(),c.parseMarkup&&y(),j("onLoadComplete",[this]),this}})(jQuery);